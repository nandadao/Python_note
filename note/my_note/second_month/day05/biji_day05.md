## day05

### 复习

1.tcp　收发消息细节

缓冲区：作用

粘包：因为发的太快，导致消息连在一起，消息无边界

２．udp套接字变成

​	服务端：socket()  ---> bind()    ----->   recvfrom()    --->  sendto()   --->  close()

​	客户端：socket()   -->    sendto()    -->  recvfrom()   --> close()

注意：尽量控制recvfrom()的

３．套接字属性

fineno()  :获取文件描述符

getpeername()　　：获取连接的客户端的地址

setsockopt()　：设置套接字的属性

区别

```
总结 ：tcp套接字和udp套接字编程区别

> 1. 流式套接字是以字节流方式传输数据，数据报套接字以数据报形式传输
> 2. tcp套接字会有粘包，udp套接字有消息边界不会粘包
> 3. tcp套接字保证消息的完整性，udp套接字则不能
> 4. tcp套接字依赖listen accept建立连接才能收发消息，udp套接字则不需要
> 5. tcp套接字使用send，recv收发消息，udp套接字使用sendto，recvfrom
```

４．struct模块

Struct() ：创建		  pack()：打包      unpack():解包

##  ===============================================新知识

### 1.HTTP协议(是一个应用层协议)（超文本传输协议）

1.特点：

持久连接：如果短时间内需要不断传输数据，就默认不断开连接

２．网页请求过程

```
1.客户端（浏览器）通过tcp传输，发送http请求给服务端
2.服务端接收到http请求后进行解析
3.服务端处理请求内容，组织响应内容
4.服务端将响应内容以http响应格式发送给浏览器
5.浏览器接收到响应内容，解析展示
```

３．HTTP请求（request）　　：请**求行，空行：是必须要有的**

```
请求行：　　GET  /  HTTP/1.1     \r\n   :\r是回车符号
	GET:获取网络资源
	POST:提交一定的信息，得到反馈
```

```
请求头：对请求的进一步解释和描述
键值对
```

```
空行
```

```
请求体：请求参数或者提交内容
```

４．http响应（response）

```
响应行：反馈基本的响应情况
HTTP/1.1   200   　　　OK
版本信息　响应码　　附加信息
404  notfound
响应码：
４０４：未找到，服务器找不到
```

```
响应头：
```

```
空行
```

```
响应体：
```



练习：

编写一个服务端http程序，在客户端发起request请求时，

将网页按照http响应格式发送给浏览器展示

提示：网页内容是响应体，注意写响应格式

提高：对请求做一定的解析判断，如果请求内容是　/  ,则发送这个网页

​			如果是其他的则用　　404 进行响应



＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝

### 多线程多进程

１．意义：充分利用计算机CPU的多核资源，同事处理多个应用程序，以此提高程序的运行效率。

２．实现方案：多进程，多线程

### 2.进程（process）

１．定义：程序在计算机中的一次运行。

```
> 程序是一个可执行的文件，是静态的占有磁盘。
> 进程是一个动态的过程描述，占有计算机运行资源，有一定的生命周期。
```

２．进程基本概念

* cup时间片:

* PCB进程控制块：

* 进程ID（PID）:大于０的*整数*，每个进程ID不*重复*。

    Linux查看进程ID ： ps -aux

* 父子进程：

    查看进程树： pstree

３．进程状态

``` 
S:休眠状态
Z:僵尸进程
小l:
```

４．进程特征

```
【1】 多进程可以更充分使用计算机多核资源
【2】 进程之间的运行互不影响，各自独立
【3】 每个进程拥有独立的空间，各自使用自己空间资源
```

５．面试要求

```
1. 什么是进程，进程和程序有什么区别
2. 进程有哪些状态，状态之间如何转化
```

### ３．基于fork的多进程编程

１．fork使用

练习：利用httpserver程序，编写一个fork多进程程序，让用户既可以通过

​			8000端口访问后端应用，也可以通过8080端口访问后端应用。

在父进程调用一下httpserver程序，

子进程调用一下httpserver程序



### 4.进程相关函数

os.getpid():获取当前进程的pid

os.getppid()：获取父进程的pid号

os._exit(status)：status:可以写-1  0   1    2  这是必写参数

os.exit(  字符串　)：退出的时候，可以打印出字符串内容

**注意**：父子进程退出互相不会影响对方

### 5.孤儿和僵尸

１．孤儿进程：孤儿进程不会成为僵尸进程，因为孤儿进程退出时，系统进程会自动处理

２．僵尸进程

## ＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝

## 作业：

１．http协议格式

２．fork的理解

３．socket　总结一下

４．求100000以内的质数之和



























