## 正则表达式

### １．动机

```
1. 文本处理已经成为计算机常见工作之一
2. 对文本内容的搜索，定位，提取是逻辑比较复杂的工作
3. 为了快速方便的解决上述问题，产生了正则表达式
```

### ２．简介

１．定义：

文本的高级匹配模式，提供搜素，替换等功能，其本质是由一系列字符和特殊符号构成的

字串，这个字串即正则表达式。

```python
In [6]: re.findall("\d{4}", "今天是2019-12-24,星期二")  # 匹配年份
Out[6]: ['2019']
```

２．普通字符

３．或关系

元字符：|

匹配规则: 匹配 | 两侧任意的正则表达式即可

```
re.findall("com | cn", "www.baidu.com/www.tmooc.cn")
["com", "cn"]
```

４．匹配单个字符（不能匹配\n）

元字符： .

匹配规则：匹配除换行外的任意一个

５．匹配字符集
元字符： [字符集]
匹配规则: 匹配字符集中的任意一个字符
表达形式:

```python
[abc#!好] 表示 [] 中的任意一个字符
[0-9],[a-z],[A-Z] 表示区间内的任意一个字符
[_#?0-9a-z] 混合书写，一般区间表达写在
e.g.
In : re.findall('[aeiou]',"How are you!")
Out: ['o', 'a', 'e', 'o', 'u']
```

６．匹配字符集反集
元字符： [　^　 字符集]
匹配规则：匹配除了字符集以外的任意一个字符

```
e.g.
In : re.findall('[^0-9]',"Use 007 port")
Out: ['U', 's', 'e', ' ', ' ', 'p', 'o', 'r', 't']
```

７．匹配字符串开始位置
元字符: ^
匹配规则：匹配目标字符串的开头位置（只有目标在开头时，才可以匹配出来）

```python
e.g.
In : re.findall('^Jame',"Jame,hello")
Out: ['Jame']
```

８．匹配字符串的结束位置
元字符: $
匹配规则: 匹配目标字符串的结尾位置

```python
e.g.
In : re.findall('Jame$',"Hi,Jame")
Out: ['Jame']
```

９．匹配字符重复
元字符: *
匹配规则：匹配前面的字符出现0次或多次

```python
e.g.
In : re.findall('wo*',"wooooo~~w!")
Out: ['wooooo', 'w']
```

元字符：+
匹配规则： 匹配前面的字符出现1次或多次

```python
e.g.
In : re.findall('[A-Z][a-z]+',"Hello World")
Out: ['Hello', 'World']
```

元字符：?
匹配规则： 匹配前面的字符出现0次或1次

```
e.g. 匹配整数
In [28]: re.findall('-?[0-9]+',"Jame,age:18, -26")
Out[28]: ['18', '-26']
```

元字符：{n}
匹配规则： 匹配前面的字符出现n次

```
e.g. 匹配手机号码
In : re.findall('1[0-9]{10}',"Jame:13886495728")
Out: ['13886495728']
```



元字符：{m,n}
匹配规则： 匹配前面的字符出现m-n次

```
e.g. 匹配qq号
In : re.findall('[1-9][0-9]{5,10}',"Baron:1259296994") 
Out: ['1259296994']
```

１０．匹配任意（非）数字字符
元字符： \d \D
匹配规则：\d 匹配任意数字字符，\D 匹配任意非数字字符

```
e.g. 匹配端口
In : re.findall('\d{1,5}',"Mysql: 3306, http:80")
Out: ['3306', '80']
```

１１．匹配任意（非）普通字符
元字符： \w \W
匹配规则: \w 匹配普通字符，\W 匹配非普通字符
说明: 普通字符指数字，字母，下划线，汉字。

```
e.g.
In : re.findall('\w+',"server_port = 8888")
Out: ['server_port', '8888']
```

１２．匹配任意（非）空字符
元字符： \s \S
匹配规则: \s 匹配空字符，\S 匹配非空字符
说明：空字符指 空格 \r \n \t \v \f 字符（\r回车的意思，　\v垂直制表符，\f换页符号）

```
e.g.
In : re.findall('\w+\s+\w+',"hello world")
Out: ['hello world']

```

１３．匹配开头结尾位置
元字符： \A \Z
匹配规则： \A 表示开头位置，\Z 表示结尾位置

１４．匹配（非）单词的边界位置
元字符： \b \B
匹配规则： \b 表示单词边界，\B 表示非单词边界
说明：单词边界指数字字母(汉字)下划线与其他字符的交界位置。

```
e.g.
In : re.findall(r'\bis\b',"This is a test.")
Out: ['is']
```

１５．元字符分类：

将元字符按照　匹配字符　　匹配重复　　匹配位置　　　进行分类

```
匹配字符：普通字符、或|、匹配单个字符 . 、匹配字符集[字符集]、
					匹配字符集反集[^字符集]、匹配任意数字字符\d \D
					匹配任意普通字符\w  \W  、匹配任意非空字符  \s \S
					
					
匹配重复：*    +  ?    {n}    {m,n}   
匹配位置：匹配字符串开始位置 ^　、匹配结束位置 $ 、匹配开头结尾位置 \A  \Z
					匹配单词的边界位置  \b  \B
```

### ３．正则表达式的转义

１．raw字符串　　--> r"xxxx"

对字符串内容不进行字符串转义处理

print(r"\n")   -- >   \n

### 练习：

１．匹配数字　　12  -1.5  -32   46.8%  1/2全部匹配出来

```python
In [101]: re.findall(r"-?\d+\.?/?\d*%?", "12,-1.5,-32,46.8%,1/2")
Out[101]: ['12', '-1.5', '-32', '46.8%', '1/2']
```

２．匹配邮箱 xxx@xxx.com

​							xxx@xxx.cn

```

```

３．匹配大写字母开头单词

Hello  CBD  I    iPython:　　　匹配出前三个，不匹配最后一个

```python
In [104]: re.findall(r"\b[A-Z]+[a-z]*\b", "Hello CBD I iPyothon")
Out[104]: ['Hello', 'CBD', 'I']
```

### ４．贪婪模式和非贪婪模式

１．概念

贪婪模式: 默认情况下，匹配重复的元字符总是尽可能多的向后匹配内容。比如: * + ? {m,n}
非贪婪模式(懒惰模式): 让匹配重复的元字符尽可能少的向后匹配内容。

在匹配重复元字符后加 '?' 号即可

```python
* : *?
+ : +?
? : ??
{m,n} : {m,n}?
e.g.
In : re.findall(r'\(.+?\)',"(abcd)efgh(higk)")
Out: ['(abcd)', '(higk)']

```

```PYTHON
In [23]: re.findall(r"\[.+?\]", "张三[国务院办公厅6处-处长],李四[Zerb,io& CEO & uaf# ]")
Out[23]: ['[国务院办公厅6处-处长]', '[Zerb,io& CEO & uaf#]']
#使用非贪婪模式，可以同时获取两个中括号中的内容   

```

### ５．正则表达式分组
1. 定义
在正则表达式中，以()建立正则表达式的内部分组，子组是正则表达式的一部分，可以作为内部整
体操作对象

### 练习：

获取身份证号

```python
In [51]: re.search(r"[0-9]{17}(\d|x)", "王：41302619800110772x").group()
Out[51]: '41302619800110772x'

```

### ６．正则表达式匹配原则

>1. 正确性,能够正确的匹配出目标字符串.
>2. 排他性,除了目标字符串之外尽可能少的匹配其他内容.
>3. 全面性,尽可能考虑到目标字符串的所有情况,不遗漏.

网络上有在线正则模块：

### ７．Python　re模块使用



### ８．match对象的属性方法

１．

### 练习：

编写一个函数，传入端口名称，返回这个端口描述信息中，对应的addredss值

提示：

１．段与段之间有空行

２．每段首单词是端口名

可以先把每一段提取出来

### 作业：

１．熟练使用正则表达式元字符

２．练习做完







































































